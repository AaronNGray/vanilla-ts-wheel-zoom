<html lang="en">
    <head>
        <title>worka/vanilla-js-wheel-zoom</title>

        <meta http-equiv="Content-type" content="text/html; charset=utf-8">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
              integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

        <style>
            .container {
                width: 600px;
                height: 600px;
                overflow: hidden;
                position: relative;
                cursor: grab;
            }
        </style>
    </head>
    <body class="p-3">
        <h1>vanilla-js-wheel-zoom</h1>

        <p class="h4 mb-4">
            <a href="https://github.com/worka/vanilla-js-wheel-zoom">
                https://github.com/worka/vanilla-js-wheel-zoom
            </a>
        </p>

        <div class="my-3 clearfix" style="width:600px">
            <button data-zoom-up class="btn btn-info float-right">Zoom Up</button>
            <button data-zoom-down class="btn btn-info float-left">Zoom Down</button>
        </div>

        <div class="container rounded bg-secondary m-0 p-0">
            <div class="myBadge border border-primary rounded bg-primary"
                 style="width:100px;height:100px;top:500px;left:600px;position:absolute"></div>

            <img src="https://placehold.it/2400x1400" alt=""/>
        </div>

        <script src="dist/wheel-zoom.min.js" type="text/javascript"></script>

        <script type="text/javascript">
            document.addEventListener('DOMContentLoaded', function () {
                var badge = document.querySelector('.myBadge');

                var jcWheelZoom = JcWheelZoom.create('img', {
                    prepare: function (scale, correctX, correctY) {
                        // do smth when image prepared

                        if (!Object.keys(badge.dataset).length) {
                            badge.dataset.width = badge.style.width.replace('px', '');
                            badge.dataset.height = badge.style.height.replace('px', '');
                            badge.dataset.left = badge.style.left.replace('px', '');
                            badge.dataset.top = badge.style.top.replace('px', '');
                        }

                        badge.style.width = (badge.dataset.width * scale) + 'px';
                        badge.style.height = (badge.dataset.height * scale) + 'px';
                        badge.style.left = (badge.dataset.left * scale + correctX) + 'px';
                        badge.style.top = (badge.dataset.top * scale + correctY) + 'px';
                    },
                    rescale: function (scale, correctX, correctY) {
                        // do smth when image rescaled

                        badge.style.width = (badge.dataset.width * scale) + 'px';
                        badge.style.height = (badge.dataset.height * scale) + 'px';
                        badge.style.left = (badge.dataset.left * scale + correctX) + 'px';
                        badge.style.top = (badge.dataset.top * scale + correctY) + 'px';
                    },
                    dragScrollableOptions: {
                        onGrab: function () {
                            document.querySelector('.container').style.cursor = 'grabbing';
                        },
                        onDrop: function () {
                            document.querySelector('.container').style.cursor = 'grab';
                        }
                    }
                });

                window.addEventListener('resize', function () {
                    jcWheelZoom.prepare();
                });

                document.querySelector('[data-zoom-up]').addEventListener('click', function () {
                    jcWheelZoom.zoomUp();
                });

                document.querySelector('[data-zoom-down]').addEventListener('click', function () {
                    jcWheelZoom.zoomDown();
                });
            });
        </script>
    </body>
</html>
